
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

<body>


<style>

body,window { padding : 0; margin : 0; overflow : hidden; }


body { background : #222; }

.logs { 
	font-variant : small-caps;
	font-size 	 : 17px;
	color : #ddd;
}

.logs .digit {
	font-size : 14px;
}

.log_step { 
	margin-top : 10px;
	font-weight : bolder;
	border-bottom : 1px solid #777;
	animation : none !important;
}

.info  {
	font-size : 90px;
	color     : #444;
}

.logs > div {
	
	animation : reveal 2s;
}

.log_player {
	font-weight : bolder;
}

@keyframes reveal {
  0%   { color : #222; }
  100% { color: #ddd; }
}
</style>



<canvas id="canvas" style='width:100%; height:100%;position:absolute; left : 0; z-index:100;'></canvas>

<script src="js/2d/test.js" ></script>


<script src="libs/three.js"></script> 

<script src="libs/stats.js"> </script>

<script src="libs/createjs-2015.11.26.min.js"></script>

<script src='libs/jquery.js'></script>



<script>
var app = {}
var api = {}
var the = {}
var ub  = {}

app.ui = {};


app.dummy = {}
</script>

<script src='js/dummy.line.js' ></script>
<script src='js/dummy.glow.js' ></script>


<script src='js/units.js' > </script> 

<script src='js/api.js'> </script>

<script src='js/scene.js' ></script>
             
<script src='js/textures.js'></script>
                          
<script src='js/player.js'> </script>
             
<script src='js/floor.js'> </script>
             
<script src='js/trap.js'></script>
             
<script src='js/materials.js'></script>

<script src='js/objects.js'></script>

<script src='js/timeline.js'></script>

<script src='js/test.js'></script>

<script src='js/camera.js'></script>

<script src='js/game.js'></script>

<script src='js/stats.js'></script>

<script src='js/events.js'></script>

<script src='js/ui/scene.js'></script>
<script src='js/ui/radar.js'></script>
<script src='js/ui/logs.js'></script>
<script src='js/ui/info.js'></script>

<script src='js/producer.js'></script>

<script src='js/persistent.js'></script>

<script>

var game = {};


</script>


<script src='logs/test/log2.js'></script>

<script>



/*

window.clearInterval( app.test.x )


app.camera.positionAtAngle( 50, 50, 15000, 0, 0 )
app.camera.positionAtAngle( 50, 50, 15000, 70, 40 )

*/


//*
var stats = new Stats();
stats.showPanel( 0 ); 
stats.showPanel( 1 );
document.body.appendChild( stats.dom );
//*/



app.persistent.init();


app.scene.clock = new THREE.Clock();


app.units.init();


app.scene.init();
app.scene.addCamera();
app.scene.addRender( app.scene.camera2 );

app.ui.scene.init();
app.ui.scene.update();

app.stats.init();

app.ui.radar.render();

app.ui.logs.render();

app.ui.info.render();

app.floor.add(  );
app.dummy.line.add( );
//app.dummy.glow.add( );




//tests for simulation. this should be removed 
app.test.init();
app.test.auto();
//app.test.animateCamera();

//app.camera.positionBySquare( 50, 50, 50, 0, 90 )

init();

//draw( true );




requestAnimationFrame = function ( callback ) {
  var currTime = Date.now(), timeToCall = Math.max( 0, 25 - ( currTime - lastTime ) );
  var id = self.setTimeout( function() { callback( currTime + timeToCall ); }, timeToCall );
  lastTime = currTime + timeToCall;
  return id;
};


lastTime = Date.now();
function animate(time) {

    if ( app.timeline.paused ) return;
    
    app.scene.renderFrame(time);
    //draw();
    
	app.ui.scene.update();
		
	requestAnimationFrame( animate );
    return;
 
}


/*
for (var i=0 ; i<5 ; i++){
	app.api.addPlayer();
}

*/

app.game.runGame( game["Level 2 - Map 0 - Round 0"], "Level 2 - Map 0 - Round 0" );
//debugger;
animate();


</script>
