

<body>


<style>

body,window { padding : 0; margin : 0 }

canvas { width : 50% !important; float : left }
</style>
<script src="libs/three.min.js"></script> 

<script>
var app = {}
var api = {}
var the = {}
var ub  = {}

app.dummy = {}
</script>

<script src='js/units.js' > </script> 

<script src='js/api.js'> </script>

<script src='js/scene.js' ></script>
             
<script src='js/textures.js'></script>
             
<script src='js/dummy.line.js' ></script>
             
<script src='js/player.js'> </script>
             
<script src='js/floor.js'> </script>
             
<script src='js/trap.js'></script>


<script>




app.scene.init();
app.scene.addCamera();


var x= [];

for ( var i = 0 ; i < 35; i++ ) {

	x[i] = {};
	app.player.add(x[i]);
	
	app.player.move( x[i], 300 * (i / 3 ) + 50, 10, 300 * ( i % 3 ) + 50 ) ;
}



var items = [];

for ( var i = 0 ;i <100; i++ ) {

	if ( i == 0 ) continue;
	
	var item = {};
	
	app.trap.add(item, i);

	
	//app.trap.move( item, 300 * (i / 10 ), 10, 300 * ( i % 10 ) )
	app.trap.move( item, (i / 10 ), 10,  ( i % 10 ) )
    
	items.push( item );
}



var item = {};

app.floor.add( item );
app.dummy.line.add( );



function animate() {

    requestAnimationFrame( animate );

    
    for ( var i in x ) { 
        app.player.rotateDelta( x[i], 0.05, 0.02 );;
    }

    for ( var i in items ) { 
        app.trap.rotateDelta( items[ i ] , 0.01, 0.02 );
    }
    
    
    
    
    var timer = Date.now() * 0.0001;

    app.scene.camera2.position.x = Math.cos( timer ) * 1700;
    app.scene.camera2.position.z = Math.sin( timer ) * 1700;
    app.scene.camera2.position.y = 750;
    
    app.scene.camera2.rotation.x = Math.PI/2;
    
    app.scene.camera2.lookAt( { x : 1500, y : 20, z : 1000 } );

    app.scene.render( );
    

}

animate();

</script>
